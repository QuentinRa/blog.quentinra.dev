# Protocols & services notes

[![protocolsandservers](../../_badges/thmp/protocolsandservers.svg)](https://tryhackme.com/room/protocolsandservers)
[![protocolsandservers2](../../_badges/thmp/protocolsandservers2.svg)](https://tryhackme.com/room/protocolsandservers2)
[![networkservices](../../_badges/thmp/networkservices.svg)](https://tryhackme.com/room/networkservices)
[![networkservices2](../../_badges/thmp/networkservices2.svg)](https://tryhackme.com/room/networkservices2)

Most entries in this course are partial knowledge about protocols/services extracted from the [Protocols & Services course](/info/networking/protocols/index.md), with cybersecurity related notes about them. The former course is more about describing the services, and the client that may be used to interact with them.

> You may also check [Cyber/Bruteforce services](/cyber/exploitation/services/bruteforce.md) to try to bruteforce a service credentials.

<hr class="sep-both">

## File Transfer protocol - 21 (tcp)

[See FTP Protocol for more information](/info/networking/protocols/index.md#-ftp---21-tcp)

<div class="row row-cols-md-2"><div>

FTP (File Transfer protocol) is a protocol used to transfer (upload, download) files from one computer to another. Use port **21** by default <small>(22 for SFTP=Secure FTP)</small>, while data is transferred via port 20.

```bash
$ ftp user@ip
ftp> ...
```
</div><div>

* Anonymous user may have been enabled

```bash
$ ftp anonymous@ip
```
</div></div>

<hr class="sep-both">

## SSH - 22 (tcp)

<div class="row row-cols-md-2"><div>

It's usually helpful to know that users may have a folder `.ssh` in their home, in which there are SSH Keys/... To avoid using passwords, servers can allow users to connect using a SSH private key. If the key isn't protected by a passphrase

* Then, a hacker can use it to connect to a server.
* Else, the hacker may trice to [brute force it](/cyber/random/crack_password/index.md#ssh-private-key---passphrase-cracking).
</div><div>

The private key is usually called `id_rsa` (if RSA was used), while the public key is usually called `id_rsa.pub`, in which you may find an username in the email at the end.

```bash
ssh login@ip -i id_rsa
```
</div></div>

<hr class="sep-both">

## Samba - 445 (or 139 before, tcp)

[See Samba service for more information](/info/networking/protocols/index.md#samba---445-or-139-before-tcp)

[![kenobi](../../_badges/thm/kenobi.svg)](https://tryhackme.com/room/kenobi)

<div class="row row-cols-md-2"><div>

[Samba](https://www.samba.org/) is making both file exchange system of Linux (NFS), and Windwos (SMB) work together. It's mostly used to share file internally, by connecting every computer, printer... to a **share**, a shared folder.

Find shares using nmap

```bash
$ nmap -p 445 --script=smb-enum-shares.nse,smb-enum-users.nse ip
```

* Try connecting anonymously with no password (leave blank)

```bash
$ smbclient //IP/share_name -U Anonymous
```
</div><div>

The tool [enum4linux](https://github.com/CiscoCXSecurity/enum4linux) (0.7k ‚≠ê) can be used to find shares, and users.

```bash
$ enum4linux options ip
$ enum4linux -a ip
# -a : list all
# -U : list of users
# -M : list of devices
# -S : list of shares
# -o : print os information
# -i : print printer information
# -v : verbose
```
</div></div>